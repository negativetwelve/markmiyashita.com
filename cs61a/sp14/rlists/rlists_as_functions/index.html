<!DOCTYPE html><html lang="en"><head><meta charset="utf-8">
<meta name="google-site-verification" content="Sbao2yVur4CMYEsgpErDP5S6uuqaNxw3VOmmtylKbeA" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="I'm Mark, a student at the University of California, Berkeley pursuing a degree in Electrical Engineering and Computer Science. I am currently a Software Engineer at Yelp and a TA for CS61A at UC Berkeley.">
<meta name="author" content="Mark Miyashita">
<link href="http://feeds.feedburner.com/markmiyashita" rel="alternate" title="Mark Miyashita" type="application/atom+xml">

<title>
  
    CS61A - Rlists As Functions - Mark Miyashita
  
</title>

<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900' rel='stylesheet' type='text/css'>

<link href="/assets/css/bootstrap.css" rel="stylesheet">
<link href="/assets/css/main.css" rel="stylesheet">
<link href="/assets/css/bootstrap-overrides.css" rel="stylesheet">
<link href="/assets/css/solarized_dark.css" rel="stylesheet">

<link href="/assets/css/default.css" rel="stylesheet">
<link href="/assets/css/custom.css" rel="stylesheet">

<script src="/assets/js/jquery-1.8.3.min.js"></script>

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="assets/js/html5shiv.js"></script>
  <script src="assets/js/respond.min.js"></script>
<![endif]-->

<!-- Start of Google Analytics Code -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29669299-1']);
  _gaq.push(['_setDomainName', 'markmiyashita.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End of Google Analytics Code -->

<!-- Start of Woopra Code -->
<script>
(function(){
  var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
})("woopra");

woopra.config({
    domain: 'markmiyashita.com',
    idle_timeout: 600000
});
woopra.track('pv', {
    url: window.location.pathname+window.location.search,
    title: document.title
});
</script>
<!-- End of Woopra Code -->

</head><body><a class="sr-only" href="#content">Skip Navigation</a><header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a href="/">About</a>
        </li>
        <li>
          <a href="/resume">Resume</a>
        </li>
        <li>
          <a href="/projects">Projects</a>
        </li>
        <li>
          <a href="/blog">Blog</a>
        </li>
        <li class="active">
          <a href="/cs61a/sp14">CS61A</a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">More CS Classes <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/cs61b">CS61B - Data Structures</a></li>
            <li><a href="/cs61c">CS61C - Computer Architecture</a></li>
            <li><a href="/cs70">CS70 - Discrete Mathematics</a></li>
          </ul>
        </li>
        <li>
          <a href="/interviews/problems">Interview Practice</a>
        </li>
        <li >
          <a href="/blueprint">Blueprint</a>
        </li>
        <li>
          <a href="/hkn">HKN</a>
        </li>
        <li>
          <a href="/web_dev">Web Development</a>
        </li>
        <li>
          <a href="/contact">Contact</a>
        </li>
      </ul>
    </nav>
  </div>
</header>
  <div class="bs-header" id="content">
  <div class="container">
    <img class="profile-pic" src="/assets/images/mark_miyashita.jpg"></img>
    <h1>Mark Miyashita</h1>
    <h4>negativetwelve</h4>
    <p>
      <a href="/resume/#education">Student</a>, <a href="/resume/#work">Software Engineer</a>, <a href="/cs61a">Teacher</a>, <a href="/blog">Aspiring Entrepreneur</a>
    </p>
  </div>
</div>
  <div class="bs-old-docs">
  <div class="container">
    Looking for more CS classes? Check out:
    
      
        <strong><a href="/cs61a">CS61A</a></strong>
      
      
      -
      
    
      
        <a href="/cs61b">CS61B</a>
      
      
      -
      
    
      
        <a href="/cs61c">CS61C</a>
      
      
      -
      
    
      
        <a href="/cs70">CS70</a>
      
      
    
  </div>
</div>
<div class="container bs-docs-container"><div class="row"><div class="col-md-3">
  
  <div class="bs-sidebar hidden-print" role="complementary" data-spy="affix" data-offset-top="335">
  <ul class="nav bs-sidenav">






  






  
  
    <li><a href="/cs61a/sp14/practice">All Problems and Notes (49)</a></li>
  

  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/basics">Basics (3)</a></li>
      
    
  
    
    
  
    
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/higher_order_functions">Higher Order Functions (3)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/environment_diagrams">Environment Diagrams (4)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/lambdas">Lambdas (1)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/newtons_method">Newtons Method (1)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/recursion">Recursion (8)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/rlists">Rlists (11)</a></li>
      
    
  
    
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/iterables">Iterables (2)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/object_oriented_programming">Object Oriented Programming (2)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/mutable_data">Mutable Data (1)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/inheritance">Inheritance (1)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/generic_functions">Generic Functions (1)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/orders_of_growth">Orders Of Growth (1)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/tree_recursion">Tree Recursion (7)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/memoization">Memoization (1)</a></li>
      
    
  
    
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/scheme">Scheme (1)</a></li>
      
    
  
    
    
  
    
    
  
    
    
      
      
      
      
        <li><a href="/cs61a/sp14/tail_recursion">Tail Recursion (1)</a></li>
      
    
  
    
    
      
      
      
      
    
  
    
    
      
      
      
      
    
  
    
    
      
      
      
      
    
  
    
    
  
    
    
      
      
      
      
    
  
    
    
  
    
    
  
    
    
  


  </ul>
</div>

</div>
<div class="col-md-9" role="main">
  <div class="page-header">
  <h1>Rlists As Functions</h1>
</div>





<ul id="markdown-toc">
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#data-abstraction">Data Abstraction</a></li>
  <li><a href="#constructors-and-selectors">Constructors and Selectors</a></li>
</ul>

<h4 id="introduction">Introduction</h4>

<!--start-->
<p>What exactly are rlists? rlists are a CS61A abstraction that defines a series of pairs that connect together by accessing the <code>first</code> and <code>rest</code> elements of the pair. We have defined the following constructs for our rlist abstraction:
<!--end--></p>

<pre><code>empty_rlist = None

def rlist(first, rest):
    return (first, rest)

def first(r):
    return r[0]

def rest(r):
    return r[1]
</code></pre>

<p>What does this mean for us? This means that for any rlist, we only have access to the first element of the list and a way to get the rest of the items (which is also an rlist). The idea is simple, but we can do powerful things with rlists.</p>

<h4 id="data-abstraction">Data Abstraction</h4>

<p>This rlist abstraction is considered an abstraction in the first place because we can change how rlists are stored and accessed. For example, we can define our class as follows and the code that we write (assuming we don’t break any abstraction barriers ourselves) would still work.</p>

<pre><code>empty_rlist = lambda x: None

def rlist(first, rest):
    return lambda x: (first, rest)

def first(r):
    return r(None)[0]

def rest(r):
    return r(None)[1]

def show(r):
    if r == empty_rlist:
        return None
    return (first(r), show(rest(r)))
</code></pre>

<p>Notice how we had to add a new function, <code>show</code> that takes in an rlist and actually gives us readable output. Otherwise, we would be staring at <code>&lt;function rlist&lt;locals&gt;.&lt;lambda&gt; at 0x1006f07a0&gt;</code> all day because our new abstraction returns functions.</p>

<p>Okay, abstractions aside, let’s figure out how to tackle these rlist problems!</p>

<h4 id="constructors-and-selectors">Constructors and Selectors</h4>

<p><strong>Always, always, always</strong> remember that we only have access to two things in our rlist, the <code>first</code> element, and the rlist that consists of the <code>rest</code> of the elements. Generally, you won’t usually see many nested calls (for example: <code>first(rest(rest()))</code>) because we usually let recursion take care of the actual traversing part.</p>

<p>Let’s walk through an example. Say we wanted to write a function, <code>less_rlist</code> that keeps all elements in the rlist that are less than the given input, <code>n</code>. How would we approach this problem?</p>

<pre><code>def less_rlist(r, n):
    """
    Takes in an rlist, r, and a number n.
    Returns a new rlist with all the elements from the original
    rlist that are less than n.

    &gt;&gt;&gt; r = rlist(1, rlist(2, rlist(5, rlist(3, empty_rlist))))
    &gt;&gt;&gt; less_rlist(r, 3)
    (1, (2, None))
    """
</code></pre>

<p>I recommend starting with the base case. Once we figure that out, we know when to stop, and we can focus on getting our input down to that level. For this question, and for most rlists in general, we want to think about our smallest input. For an rlist, that smallest input is the <code>empty_rlist</code>. When we input the <code>empty_rlist</code>, we expect to get back the <code>empty_rlist</code> because all the elements (none in this case) are less than n. So we can now write one of our base cases.</p>

<pre><code>def less_rlist(r, n):
    if r == empty_rlist:
        return r
</code></pre>

<p>Now we need to determine if there are any more base cases. For this question, we also have to consider the case when the item that we are currently on is less than the number n. What do we need to do when this is true? We need to just continue recursing on the rest of the list while keeping this element in our new rlist. What do we need to do when it’s false? We need to also recurse on the rest of our rlist, BUT, we don’t need to keep the current item and we can just keep going. Let’s write the if case.</p>

<pre><code>def less_rlist(r, n):
    if r == empty_rlist:
        return r
    if first(r) &lt; n:
        return rlist(first(r), less_rlist(rest(r), n))
</code></pre>

<p>The only single element that we can check is the one that we are currently on. The way we access this element is by calling the function, <code>first</code> on our rlist. Like we said above, when this is true, we need to construct an rlist with the first element being in our new rlist and the rest of the rlist is just the result of calling the same function on the rest. By calling the function on the rest of our rlist, we are making our way to the base case. Let’s finish up the function. What do we do in the recursive case? We just call the same function on our rest and we forget about the current element because it does not satisfy the condition of being less than n. Let’s write it.</p>

<pre><code>def less_rlist(r, n):
    if r == empty_rlist:
        return r
    if first(r) &lt; n:
        return rlist(first(r), less_rlist(rest(r), n))
    return less_rlist(rest(r), n)
</code></pre>

<p>That wasn’t so bad was it? Try some of the extra recursive rlist questions below!</p>


<p class="disclaimer">
  I don't claim to be perfect so if you find an error on this page, please <a href="/contact">send me an email</a> preferably with a link to this page so that I know what I need to fix!
</p>

<article class="post">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'markmiyashita'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</article>

</div></div></div><footer class="bs-footer" role="contentinfo"><p class="copyright">© 2014 Mark Miyashita</p><ul class="footer-links"><li><a href="http://github.com/negativetwelve">Github</a></li><li class="muted">&middot;</li><li><a href="https://hkn.eecs.berkeley.edu/coursesurveys/instructor/7762">TA Ratings</a></li><li class="muted">&middot;</li><li><a href="https://www.facebook.com/markmiyashita12">Facebook</a></li><li class="muted">&middot;</li><li><a href="http://www.linkedin.com/pub/mark-miyashita/38/63/49/">LinkedIn</a></li><li class="muted">&middot;</li><li><a href="https://plus.google.com/101180624276428786239?rel=author">Google+</a></li></ul></footer><script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/highlight.pack.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  $(".solution_toggle").click(function(event) {
    event.preventDefault();
    $(".solution").fadeToggle('medium');
  });
});


hljs.initHighlightingOnLoad();

$(document).keypress(function(e) {
  base = document.location.origin;
  switch (e.charCode) {
    case 97: // 'a' for about
      document.location.href = base;
      break;
    case 98: // 'b' for blog
      document.location.href = base + '/blog';
      break;
    case 104: // 'h' for hkn
      document.location.href = base + "/hkn";
      break;
    case 105: // 'i' for interview practice
      document.location.href = base + "/interviews/problems";
      break;
    case 109: // 'm' for more
      $('#sub-links').slideDown('medium');
      break;
    case 112: // 'p' for projects
      document.location.href = base + '/projects';
      break;
    case 114: // 'r' for resume
      document.location.href = base + '/resume';
      break;
    case 119: // 'w' for web development
      document.location.href = base + '/web_dev';
      break;
    case 99: // 'c' for cs61a
      window.location.href = base + "/cs61a";
      break;
    default:
      console.log(e.charCode);
  }
});
</script>
</body></html>
